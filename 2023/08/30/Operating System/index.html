<!DOCTYPE html><html lang="zh-Hans" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Operating System | Colythme</title><meta name="description" content="Operating SystemWhat is Operating System? It serves as an intermediary between computer User and computer Hardware  Specificlly,$$\text{User} \rightarrow (\text{use}) \text{Application Programs} \righ"><meta name="keywords" content="OS"><meta name="author" content="Colythme"><meta name="copyright" content="Colythme"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="https://i.loli.net/2020/07/01/HAkVZw1jYbBezxS.jpg"><link rel="canonical" href="http://colythme.github.io/2023/08/30/Operating%20System/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta property="og:type" content="article"><meta property="og:title" content="Operating System"><meta property="og:url" content="http://colythme.github.io/2023/08/30/Operating%20System/"><meta property="og:site_name" content="Colythme"><meta property="og:description" content="Operating SystemWhat is Operating System? It serves as an intermediary between computer User and computer Hardware  Specificlly,$$\text{User} \rightarrow (\text{use}) \text{Application Programs} \righ"><meta property="og:image" content="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><meta property="article:published_time" content="2023-08-31T05:41:23.203Z"><meta property="article:modified_time" content="2023-09-13T00:13:12.000Z"><meta name="twitter:card" content="summary"><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = '2'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  bookmark: {
    message_prev: 'Press',
    message_next: 'to bookmark this page'
  },
  runtime_unit: 'days',
  runtime: true,
  copyright: {"limitCount":50,"languages":{"author":"Author: Colythme","link":"Link: ","source":"Source: Colythme","info":"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source."}},
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: {"bookmark":{"message_prev":"Press","message_next":"to bookmark this page"},"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Dark Mode Activated Manually","night_to_day":"Light Mode Activated Manually","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: true    
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true,
  postUpdate: '2023-09-12 17:13:12'
}</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img {
  opacity: 1
}
</style></noscript><style type="text/css">#toggle-sidebar {bottom: 80px}</style><meta name="generator" content="Hexo 5.4.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">Loading...</div></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" data-lazy-src="https://i.loli.net/2020/07/01/VbugJ9i4FUkIsoE.jpg" onerror="onerror=null;src='/img/404_2.jpeg'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">Articles</div><div class="length_num">89</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">Tags</div><div class="length_num">80</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">Categories</div><div class="length_num">25</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archive</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tag</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Category</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> Repose</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/gallery/"><i class="fa-fw fas fa-image"></i><span> Gallery</span></a></li><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div id="body-wrap"><div id="sidebar"><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Operating-System"><span class="toc-number">1.</span> <span class="toc-text">Operating System</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#What-is-Operating-System"><span class="toc-number">1.1.</span> <span class="toc-text">What is Operating System?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Basics-of-Operating-Systems"><span class="toc-number">1.2.</span> <span class="toc-text">Basics of Operating Systems</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Modern-Computer-System"><span class="toc-number">1.2.1.</span> <span class="toc-text">Modern Computer System</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Terms-You-Need-to-Know"><span class="toc-number">1.2.2.</span> <span class="toc-text">Terms You Need to Know</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Storage-Structure"><span class="toc-number">1.2.3.</span> <span class="toc-text">Storage Structure</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Main-Memory-RAM"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">Main Memory (RAM)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#I-O"><span class="toc-number">1.2.4.</span> <span class="toc-text">I&#x2F;O</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Working-of-an-I-O-Structure"><span class="toc-number">1.2.4.1.</span> <span class="toc-text">Working of an I&#x2F;O Structure</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Computer-System-Architecture"><span class="toc-number">1.2.5.</span> <span class="toc-text">Computer System Architecture</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Single-Processor-System"><span class="toc-number">1.2.5.1.</span> <span class="toc-text">Single Processor System</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Multiprocessor-System"><span class="toc-number">1.2.5.2.</span> <span class="toc-text">Multiprocessor System</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Types-of-Multiprocessor-System"><span class="toc-number">1.2.5.2.1.</span> <span class="toc-text">Types of Multiprocessor System</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Clustered-System"><span class="toc-number">1.2.5.3.</span> <span class="toc-text">Clustered System</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Operating-System-Structure"><span class="toc-number">1.2.6.</span> <span class="toc-text">Operating System Structure</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Multiprogramming"><span class="toc-number">1.2.6.1.</span> <span class="toc-text">Multiprogramming</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Multitasking-Time-Sharing"><span class="toc-number">1.2.6.2.</span> <span class="toc-text">Multitasking (Time Sharing)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Operating-System-Services"><span class="toc-number">1.2.7.</span> <span class="toc-text">Operating System Services</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#User-Interface"><span class="toc-number">1.2.7.1.</span> <span class="toc-text">User Interface</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Program-Execution"><span class="toc-number">1.2.7.2.</span> <span class="toc-text">Program Execution</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#I-O-Operations"><span class="toc-number">1.2.7.3.</span> <span class="toc-text">I&#x2F;O Operations</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#File-System-Manipulation"><span class="toc-number">1.2.7.4.</span> <span class="toc-text">File System Manipulation</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Communications"><span class="toc-number">1.2.7.5.</span> <span class="toc-text">Communications</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Error-Detection"><span class="toc-number">1.2.7.6.</span> <span class="toc-text">Error Detection</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Resource-Allowcation"><span class="toc-number">1.2.7.7.</span> <span class="toc-text">Resource Allowcation</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Accounting"><span class="toc-number">1.2.7.8.</span> <span class="toc-text">Accounting</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Protection-and-Security"><span class="toc-number">1.2.7.9.</span> <span class="toc-text">Protection and Security</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#User-Operating-System-Interface"><span class="toc-number">1.2.8.</span> <span class="toc-text">User Operating System Interface</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Command-Interpreter"><span class="toc-number">1.2.8.1.</span> <span class="toc-text">Command Interpreter</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#System-Calls"><span class="toc-number">1.2.9.</span> <span class="toc-text">System Calls</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Types-of-System-Calls"><span class="toc-number">1.2.9.1.</span> <span class="toc-text">Types of System Calls</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#System-Programs"><span class="toc-number">1.2.10.</span> <span class="toc-text">System Programs</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Structures-of-Operating-System"><span class="toc-number">1.2.11.</span> <span class="toc-text">Structures of Operating System</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Simple-Structure"><span class="toc-number">1.2.11.1.</span> <span class="toc-text">Simple Structure</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Monolithic-Structure"><span class="toc-number">1.2.11.2.</span> <span class="toc-text">Monolithic Structure</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Layered-Structure"><span class="toc-number">1.2.11.3.</span> <span class="toc-text">Layered Structure</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Microkernels"><span class="toc-number">1.2.11.4.</span> <span class="toc-text">Microkernels</span></a></li></ol></li></ol></li></ol></li></ol></div></div></div><header class="post-bg" id="page-header" style="background-image: url(https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">Colythme</a></span><span class="pull-right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archive</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tag</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Category</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> Repose</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/gallery/"><i class="fa-fw fas fa-image"></i><span> Gallery</span></a></li><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">Operating System</div></div><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-08-31T05:41:23.203Z" title="Created 2023-08-30 22:41:23">2023-08-30</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2023-09-13T00:13:12.000Z" title="Updated 2023-09-12 17:13:12">2023-09-12</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Operating-System/">Operating System</a></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1 id="Operating-System"><a href="#Operating-System" class="headerlink" title="Operating System"></a>Operating System</h1><h2 id="What-is-Operating-System"><a href="#What-is-Operating-System" class="headerlink" title="What is Operating System?"></a>What is Operating System?</h2><blockquote>
<p>It serves as an intermediary between computer <strong>User</strong> and computer <strong>Hardware</strong></p>
</blockquote>
<p>Specificlly,<br>$$<br>\text{User} \rightarrow (\text{use}) \text{Application Programs} \rightarrow (\text{needs}) \text{Operating System} \rightarrow {\text{(to connect to)}} \text{Hardware}<br>$$<br>Without operating systems, even doing the easiest things, for example using word processor, e.g.. Microsoft Word, to type something, we need to code to tell the hardware about how they should handling my inputs, and where should it be saved in the memory, etc.. Really tedious, isn’t it?</p>
<p>So the functions of operating systems are:</p>
<ul>
<li>Be an interface between User &amp; Hardware</li>
<li>Allocation of Resources</li>
<li>Management of Memory, Security, etc.</li>
</ul>
<h2 id="Basics-of-Operating-Systems"><a href="#Basics-of-Operating-Systems" class="headerlink" title="Basics of Operating Systems"></a>Basics of Operating Systems</h2><h3 id="Modern-Computer-System"><a href="#Modern-Computer-System" class="headerlink" title="Modern Computer System"></a>Modern Computer System</h3><blockquote>
<p>A modern general-purpose computer system consists of one or more CPUs and a number of device controllers connected through a common bus that provides access to shared memory</p>
</blockquote>
<p>The graph explanation of the sentence is as follows:</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://s1.ax1x.com/2023/08/31/pPw20r4.png" alt="pPw20r4.png"></p>
<p>The line refers to the common bus</p>
<p>Then,</p>
<ul>
<li><p>Each <strong>device controller</strong> is in charge of a specific type of <strong>device</strong>. Each device controller maintains:</p>
<ul>
<li><p>Local Buffer Storage</p>
</li>
<li><p>Set of Special Purpose Registers</p>
<p>And OS has a <strong>device driver</strong> for each <strong>device controller</strong>. The purpose of device driver is to presents a uniform interface to allow the device controller to interact with the operating system</p>
</li>
</ul>
</li>
<li><p>The CPU and the device controllers can execute <strong>concurrently</strong>, competing for memory cycles.</p>
<p>  How to understand this word?</p>
<p>  First of all, we need to be clear that <strong>whenever something has to be executed or loaded, it has to be loaded into the main memory, i.e., RAM</strong>. And the power of system can be performed by “execute concurrently”, which ensures that your controls will not be responsed with lags.</p>
<p>  And to achieve this goal, it needs:</p>
</li>
<li><p>To ensure orderly access to the shared memory, a memory controller is provided whose function is to synchronize access to the memory</p>
</li>
</ul>
<hr>
<h3 id="Terms-You-Need-to-Know"><a href="#Terms-You-Need-to-Know" class="headerlink" title="Terms You Need to Know"></a>Terms You Need to Know</h3><ul>
<li><p>Throughput:</p>
<ul>
<li>Throughput is a measure of how many units of information a system can process in a given amount of time, i.e., a measure of the performance of the system</li>
<li>Higher throughput, better the performance</li>
</ul>
</li>
<li><p>Bootstrap Program:</p>
<ul>
<li><p>The initial program that runs when the computer is powered up or rebooted</p>
</li>
<li><p><strong>It is stored in ROM (Read Only Memory)</strong></p>
</li>
<li><p>It must know how to load the OS and start executing that system</p>
<p>  <em>Explanation:</em> OS is also a program, and is stored in the <strong>secondary memory</strong> intially. And since the bootstrap program is the first program executed when starting the computer, it must know where the OS program is and invoke it</p>
</li>
<li><p>It must locate and load the OS Kernel into memory</p>
<p>  <em>Explanation:</em> What is <strong>Kernel</strong>? It is the main part of operating system. It is the software of first level in OS</p>
</li>
</ul>
</li>
<li><p>Interrupt:</p>
<ul>
<li><p>The occurence of an event is usually signalled by an Interrupt <strong>from Hardware or Software</strong></p>
<p>  <em>Explanation:</em> CPU is always working on some tasks. But sometimes a hardware or software may tell the CPU that “pls do this task first, for it is more important”. It is called <em>Interrupt</em></p>
</li>
<li><p><strong>Hardware</strong> may trigger an interrupt at any time <strong>by sending a signal to the CPU</strong>, usually <strong>by the way of the system bus</strong></p>
</li>
</ul>
</li>
<li><p>System Call (Monitor Call):</p>
<ul>
<li><strong>Software</strong> may trigger an interrupt by executing a special operation called System Call</li>
</ul>
</li>
</ul>
<p>So for hardware, we usually call it <em>Interrupt</em>, and for software is <em>System Call</em></p>
<p>Then how will the CPU react to interrupts?</p>
<ul>
<li><p>When the CPU is interrupted, it <strong>stops what it is doing</strong> and immediately <strong>transfers execution to a fixed location</strong></p>
<ul>
<li><p>Fixed Location: The fixed location usually contains the starting address where the Service Routine of the interrupt is located</p>
<ul>
<li>Service Routine: What the interrupt wants to do is written in the Service Routine. Sometimes Interrupt Service Routine is known as <strong>I.S.R.</strong></li>
</ul>
<p>So the fixed location indicates the address where CPU should start executing what the interrupt wants to do</p>
</li>
</ul>
</li>
<li><p>Then, the I.S.R. executes</p>
</li>
<li><p>On completion, the CPU resumes the interrupted computation, i.e., goes back to where it comes from and resumes the original work</p>
</li>
</ul>
<hr>
<h3 id="Storage-Structure"><a href="#Storage-Structure" class="headerlink" title="Storage Structure"></a>Storage Structure</h3><p><img src= "/img/loading.gif" data-lazy-src="https://s1.ax1x.com/2023/08/31/pPw4FAJ.png" alt="pPw4FAJ.png"></p>
<ul>
<li>Register: The smallest storage device. It only stores data in bits, i.e., 0’s or 1’s. Therefore, it can be accessed quickly</li>
<li>Cache: A little bigger than the register, but slower</li>
<li>Main Memory: RAM (Random Access Memory)</li>
<li>Secondary Storage Devices: It refers to Electronic Disks, Magnetic Disks, Optical Disks, and Magnetic Tapes</li>
</ul>
<h4 id="Main-Memory-RAM"><a href="#Main-Memory-RAM" class="headerlink" title="Main Memory (RAM)"></a>Main Memory (RAM)</h4><p>Everything needed for execution will be loaded into main memory</p>
<p>So things are stored in secondary memory, but loaded in main memory for execution purpose</p>
<p>Although the main memory is fast, its size is limited (which means you cannot store all your programs &amp; data in main memory) and is also volatile in nature. And that’s why we need secondary memory to save unused stuff</p>
<blockquote>
<p>Volatile: Loses its contents when power is removed</p>
<p>Non-Volatile: Retains its contents even when power is removed</p>
</blockquote>
<p>So if you have a bigger main memory, your computer works faster because it saves time on taking some data out from secondary memory and put into main memory</p>
<hr>
<h3 id="I-O"><a href="#I-O" class="headerlink" title="I/O"></a>I/O</h3><h4 id="Working-of-an-I-O-Structure"><a href="#Working-of-an-I-O-Structure" class="headerlink" title="Working of an I/O Structure"></a>Working of an I/O Structure</h4><ul>
<li><p>To start an I/O operation, the device driver loads the appropriate registers (those which are required for performing a paticular I/O operation) within the device controller</p>
<p>  These required registers have the information or data about what is the action, or what is the exact I/O operation that has to be performed</p>
</li>
<li><p>The device controller, in turn, examines the contents of these registers to determine what action to take</p>
</li>
<li><p>The controller starts the transfer of data <strong>from the device</strong> to its local buffer</p>
</li>
<li><p>Once the transfer of data is complete, the device controller informs the device driver via an interrupt that it has finished its operation</p>
</li>
<li><p>The device driver returns control to the operating system</p>
</li>
</ul>
<p>The graph of this process is as follows (without <em>DMA</em>):</p>
<img src= "/img/loading.gif" data-lazy-src="https://s1.ax1x.com/2023/09/01/pP0YCE4.png" alt="pP0YCE4.png" style="zoom: 25%;" />

<p>As you can see, <strong>we always need to pass through CPU to store our data into memory during I/O process</strong></p>
<p><em>This form of interrupt-drive I/O is fine for moving small amounts of data, but can produce high overhead when used for bulk data movement, for CPU is always interrupted over here, which means it takes up too much of the CPU and time.</em></p>
<p><em>To solve this problem, Direct Memory Access (DMA) is used.</em></p>
<blockquote>
<p><em>DMA:</em> After setting up buffers, pointers, and counters for the I/O device, the device controller transfers an entire block of data directly to or from its own buffer storage to memory, with no intervention by the CPU</p>
</blockquote>
<p>And with DMA, we can send data in blocks instead sending through CPU respectively</p>
<p>Only one interrupt is generated per block, to tell the device driver that the operation has completed</p>
<p>While the device controller is performing these operations, the CPU is available to accomplish other works</p>
<hr>
<h3 id="Computer-System-Architecture"><a href="#Computer-System-Architecture" class="headerlink" title="Computer System Architecture"></a>Computer System Architecture</h3><p>Computer systems can be categorized based on number of General Purpose Processors:</p>
<ul>
<li>Single Processor System</li>
<li>Multiprocessor System</li>
<li>Clustered System: Two or more system are clustered to perform certain tasks</li>
</ul>
<h4 id="Single-Processor-System"><a href="#Single-Processor-System" class="headerlink" title="Single Processor System"></a>Single Processor System</h4><ul>
<li><p>One main CPU capable of executing a general purpose instruction set including instructions from user processes</p>
</li>
<li><p>In fact, apart from the main GPU, there are still other special purpose processors in single processor system, but they do not do general purpose tasks but perform some device specific tasks</p>
</li>
</ul>
<h4 id="Multiprocessor-System"><a href="#Multiprocessor-System" class="headerlink" title="Multiprocessor System"></a>Multiprocessor System</h4><ul>
<li>Also known as  <em>parallel systems</em> or <em>tightly coupled systems</em></li>
<li>Has two or more processors in close communication, sharing the computer bus and sometimes the clock, memory, and peripheral devices</li>
</ul>
<h5 id="Types-of-Multiprocessor-System"><a href="#Types-of-Multiprocessor-System" class="headerlink" title="Types of Multiprocessor System"></a>Types of Multiprocessor System</h5><p><img src= "/img/loading.gif" data-lazy-src="https://s1.ax1x.com/2023/09/01/pP02379.png" alt=""></p>
<ul>
<li>Symmetric Multiprocessing: All CPU are similar, together working on the sams set of processes</li>
<li>Asymmetric Muliprocessing: One CPU acts as the master, others as slaves. Master assigns tasks to slaves to let them do their works on their own</li>
</ul>
<h4 id="Clustered-System"><a href="#Clustered-System" class="headerlink" title="Clustered System"></a>Clustered System</h4><ul>
<li>Like multiprocessor systems, clustered systems gather together multiple CPUs to accomplish computational work</li>
<li>They are composed of two or more individual systems coupled together</li>
<li>Provides high availibility</li>
<li>Can be structrued asymmetrically or symmetrically</li>
</ul>
<hr>
<h3 id="Operating-System-Structure"><a href="#Operating-System-Structure" class="headerlink" title="Operating System Structure"></a>Operating System Structure</h3><p>Operating systems vary greatly in their makeup internally, but they need to have some commonalities:</p>
<ul>
<li>Multiprogramming</li>
<li>Multitasking (Time Sharing)</li>
</ul>
<h4 id="Multiprogramming"><a href="#Multiprogramming" class="headerlink" title="Multiprogramming"></a>Multiprogramming</h4><blockquote>
<p>Multiprogramming means the capbility of running multiple programs by the CPU</p>
</blockquote>
<ul>
<li><p>With multiprogramming, in general, keep either the CPU or the I/O devices busy at all times</p>
<p>  <em>It also means without multiprogramming, they can be busy at all times</em></p>
</li>
<li><p>Multiprogramming increases CPU utilization by organizing jobs (code and data) so that the CPU always has one to execute</p>
</li>
</ul>
<p>Now we discuss it by graph:</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://s1.ax1x.com/2023/09/01/pP0fOjf.png" alt=""></p>
<p>Suppose now we have some jobs to be executed, and they are all in a <em>Job Pool.</em> Since the memory(RAM) is not unlimited, we can only load a part of jobs in the Job Pool into it</p>
<p>If without multiprogramming, the CPU can only be used by Job 2 until Job 1 is finished, even though Job 1 may only make use of I/O devices instead of CPU itself</p>
<p>With multiprogramming, Job 2 should be able to use the CPU when Job 1 is only using I/O devices</p>
<p>Therefore, in conclusion, multiprogramming enables that whenever a particular job does not want to use the CPU, the CPU can be utilized by another job</p>
<h4 id="Multitasking-Time-Sharing"><a href="#Multitasking-Time-Sharing" class="headerlink" title="Multitasking (Time Sharing)"></a>Multitasking (Time Sharing)</h4><ul>
<li><p>CPU executes multiple jobs by switching among them</p>
</li>
<li><p>Switches occur so frequently that the users can interact with each program while it is running</p>
</li>
<li><p>Time sharing requires an interactive (or hands-on) computer system which provides direct communication between the user and the system</p>
</li>
<li><p>A time-shared operating system allows many users to share the computer simultaneously</p>
<p>  <em>It is because the system switches so fast that users don’t realize they are sharing the system</em></p>
</li>
</ul>
<p>Suppose we have multiple users sharing the same system right now</p>
<p>In the time-shared system, it uses CPU scheduling and multiprogramming to provide each user with a small portion of a time-shared system</p>
<p>Each user has at least one separate program to be executed</p>
<p><strong>A program loaded into memory and executing is called a PROCESS</strong></p>
<hr>
<h3 id="Operating-System-Services"><a href="#Operating-System-Services" class="headerlink" title="Operating System Services"></a>Operating System Services</h3><p>An OS provides an environment for the execution of programs</p>
<p>It provides certain services to programs and to users of those programs</p>
<p>Below are services provided by the OS listed</p>
<h4 id="User-Interface"><a href="#User-Interface" class="headerlink" title="User Interface"></a>User Interface</h4><ul>
<li>Commend Line Interface (CLI)</li>
<li>Graphicla User Interface (GUI)</li>
</ul>
<h4 id="Program-Execution"><a href="#Program-Execution" class="headerlink" title="Program Execution"></a>Program Execution</h4><p>OS should be able to load the program into memory, and then run the program</p>
<p>Process of program execution:<br>$$<br>\text{Source Code $\rightarrow$ Compiler $\rightarrow$ Object Code $\rightarrow$ Executor $\rightarrow$ Output}<br>$$</p>
<h4 id="I-O-Operations"><a href="#I-O-Operations" class="headerlink" title="I/O Operations"></a>I/O Operations</h4><p>Although you feel like you’re using the input devices like mouse &amp; keyboard directly, but in fact it is OS that actually controls the usage of the I/O devices</p>
<h4 id="File-System-Manipulation"><a href="#File-System-Manipulation" class="headerlink" title="File System Manipulation"></a>File System Manipulation</h4><p>For example, sometimes you need to create or delete files. These operations are as well controlled by the operating system</p>
<p>And also it  controls the permission that is given to certain programs or users for the access to certain files</p>
<h4 id="Communications"><a href="#Communications" class="headerlink" title="Communications"></a>Communications</h4><p><em>Communication between processes</em></p>
<p>Communication (e.g. information exchange) between processes (in same computer or between different computers) is controlled by the OS</p>
<h4 id="Error-Detection"><a href="#Error-Detection" class="headerlink" title="Error Detection"></a>Error Detection</h4><p>If some error occurs the system must not break down completely and it should not just seize your computing ability completely. The OS must have a way in which it manages those errors so that your computing is consistent and it is still carried on even if some errors are encountered</p>
<h4 id="Resource-Allowcation"><a href="#Resource-Allowcation" class="headerlink" title="Resource Allowcation"></a>Resource Allowcation</h4><p>The OS must allocate the resources in an efficient way such that all the processes get the resources that they need and no process keeps waiting for it and never gets it. And there also should not be a scenario where a resource is held by a particular process but never released</p>
<h4 id="Accounting"><a href="#Accounting" class="headerlink" title="Accounting"></a>Accounting</h4><p>The OS keeps track of which user use how much and what kind of resources. This record keeping may be used for accounting or simply for accumulating usage statistics</p>
<h4 id="Protection-and-Security"><a href="#Protection-and-Security" class="headerlink" title="Protection and Security"></a>Protection and Security</h4><ul>
<li><p>Protection:</p>
<ul>
<li><p>When several different processes are executing at the same time, it should not be possible for one process to interfere with the others or with the OS itself</p>
</li>
<li><p>Protection means access to the system resources must be controlled</p>
</li>
</ul>
</li>
<li><p>Security</p>
<ul>
<li>The system should not be accessible to outsiders who are not allowed to access the system</li>
</ul>
</li>
</ul>
<hr>
<h3 id="User-Operating-System-Interface"><a href="#User-Operating-System-Interface" class="headerlink" title="User Operating System Interface"></a>User Operating System Interface</h3><p>Two fundamental approaches for users to interact with the operating system:</p>
<ul>
<li>CLI, also as known as <em>Command Interpreter</em></li>
<li>GUI</li>
</ul>
<h4 id="Command-Interpreter"><a href="#Command-Interpreter" class="headerlink" title="Command Interpreter"></a>Command Interpreter</h4><ul>
<li><p>Some operating systems include the command interpreter in the kernel</p>
</li>
<li><p>Others, such as Windows XP and UNIX, treat the command interpreter as a program</p>
</li>
<li><p>On systems with multiple command interpreters to choose from, the interpreters are known as shells. For example,</p>
<ul>
<li>Bourne shell</li>
<li>C shell</li>
<li>Bourne-Again Shell (BASH)</li>
<li>Korn Shell</li>
</ul>
</li>
</ul>
<h3 id="System-Calls"><a href="#System-Calls" class="headerlink" title="System Calls"></a>System Calls</h3><blockquote>
<p>System calls provide an interface to the services made available by an Operating System</p>
</blockquote>
<p>First we need to know that a program can be executed in two kinds of mode</p>
<ul>
<li>User mode</li>
<li>Kernel mode</li>
</ul>
<p>In User mode, the program does not have direct access to the memory. In contrast, it has in Kernel mode, so it is as well said as <em>Privileged mode</em></p>
<p>But we need to note that when the system would following the program to crash when it is in Kernel mode. Instead, user mode would not, which means it executes in a safer mode</p>
<p>Now comes to the use of system calls. When the program is in User mode, it would make a system call to the OS whenever it needs resources. Then it would switches from User mode to Kernel mode, which is called <em>Context Switching</em></p>
<h4 id="Types-of-System-Calls"><a href="#Types-of-System-Calls" class="headerlink" title="Types of System Calls"></a>Types of System Calls</h4><ul>
<li>Process Control</li>
<li>File Manipulation</li>
<li>Device Management<ul>
<li>There’s a point inside device management that needs to be noted is a content of type: <em>logically attach or detach device</em><ul>
<li>Physically attach means we plug a device into it the system manually</li>
<li>Logically attach means the OS needs to understand that that the device has been attached is ready to use; Logically detaching means logically removing the device from the OS, e.g., pan-drive ejection</li>
</ul>
</li>
</ul>
</li>
<li>Information Maintenance<ul>
<li>It means all the information that we have about the system must be maintained and updated, e.g., data &amp; time</li>
</ul>
</li>
<li>Communications<ul>
<li>It refers to system calls that are used for communication between different processes or different devices</li>
<li>So the functionalities of this type of system call may content<ul>
<li>create, delete communication connection</li>
<li>send, receive messages</li>
<li>transfer status information</li>
<li>attach or detach remote devices</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="System-Programs"><a href="#System-Programs" class="headerlink" title="System Programs"></a>System Programs</h3><p><img src= "/img/loading.gif" data-lazy-src="https://s1.ax1x.com/2023/09/09/pP6O3CR.png" alt=""></p>
<p>Let’s first take a look on the computer system hierarchy. System programs lies between application programs &amp; the OS</p>
<ul>
<li>System programs provide a convenient environment for program development and execution</li>
<li>Some of them are simply user interfaces to system calls</li>
<li>Others are considerably more complex</li>
</ul>
<p>And there are several types of system programs</p>
<ul>
<li>File Management: For example, list, and generally manipulate files and directories</li>
<li>Status Information: For example, ask the system for date, time, and number of users</li>
<li>File Modification: The difference between <em>File Management</em> &amp; <em>File Modification</em> is that the former one is about the outer layer of files, e.g., creating, deleting, renaming, copying, etc.., the latter one is about the inner layer of files, e.g., modifiying the contents of files</li>
<li>Programming Language Support: For example, compilers, assemblers, debuggers, and interpreters</li>
<li>Program Loading and Execution: Once a program is assembled or compiled, it must be loaded into memory to be executed</li>
<li>Communications:<ul>
<li>Creating virtual connections among processes, users, and computer systems</li>
<li>Allowing users to send messages to one another’s screens</li>
<li>To browse webpages</li>
<li>To send electronic-mail messages</li>
<li>To log in remotely or to transfer files from one machine to another</li>
</ul>
</li>
</ul>
<h3 id="Structures-of-Operating-System"><a href="#Structures-of-Operating-System" class="headerlink" title="Structures of Operating System"></a>Structures of Operating System</h3><h4 id="Simple-Structure"><a href="#Simple-Structure" class="headerlink" title="Simple Structure"></a>Simple Structure</h4><img src= "/img/loading.gif" data-lazy-src="https://s1.ax1x.com/2023/09/13/pP2JYy4.png" style="zoom:33%;" />

<p><em>MS-Dos</em> is designed with this pattern. The arrows $A \Rightarrow B$ refers to “A has an access to B”. Let’s take a look at it from the bottom to the top</p>
<ul>
<li>ROM BIOS device drivers: We can think of it as hardwares</li>
<li>Device Drivers</li>
<li>Resident System Programs: It refers to a set of programs within an operating system (OS) that reside in memory and are readily available. <strong>These programs are part of the operating system, typically loaded into memory when the computer starts up, and they remain active during the runtime of the operating system.</strong> They are crucial for the proper functioning and management of the system, providing core system functionalities and services</li>
<li>Application Programs</li>
</ul>
<p>As we can see, almost every layer above has the access to layers below it, which means <strong>it is vulnerable to errant and malicious programs, causing the entire system to crash when the user program fails</strong></p>
<h4 id="Monolithic-Structure"><a href="#Monolithic-Structure" class="headerlink" title="Monolithic Structure"></a>Monolithic Structure</h4><p>Followed by Eearlier <em>Unix</em> operating system</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://s1.ax1x.com/2023/09/13/pP2J66e.png" alt=""></p>
<ul>
<li>Everything above <em>Hardware</em> and below <em>System-Call Interface</em> is called <em>Kernel</em></li>
</ul>
<p><strong>We can see that nearly all the functinalities are packed into one level called Kernel, which makes its implementation and maintenance very difficult.</strong> Let’s say if you want to add something or debug, you have to change or modify the entire thing</p>
<h4 id="Layered-Structure"><a href="#Layered-Structure" class="headerlink" title="Layered Structure"></a>Layered Structure</h4><img src= "/img/loading.gif" data-lazy-src="https://s1.ax1x.com/2023/09/13/pP2Jqmj.png" style="zoom: 50%;" />

<p><em>Advantages</em></p>
<ul>
<li>Solves two issues in the above stuctures. It is easy to maintain and is not vulnerable</li>
</ul>
<p><em>Disadvantages</em></p>
<ul>
<li>Hard to design</li>
<li>It may not be efficient enough because when one layer wants to use the services provided by the layers below it, the request has to go down below each layer one by one. And by the time the service is actually provided, it may be late or it may not be very fast</li>
</ul>
<h4 id="Microkernels"><a href="#Microkernels" class="headerlink" title="Microkernels"></a>Microkernels</h4><img src= "/img/loading.gif" data-lazy-src="https://s1.ax1x.com/2023/09/13/pP2Yn1O.png" style="zoom: 50%;" /></div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Colythme</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://colythme.github.io/2023/08/30/Operating%20System/">http://colythme.github.io/2023/08/30/Operating%20System/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/OS/">OS</a></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/09/05/Horror_Gam_%E9%97%B2%E8%B0%8801/"><img class="prev-cover" data-lazy-src="https://s1.ax1x.com/2023/09/01/pP0sTbR.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">Horror Game闲谈01</div></div></a></div><div class="next-post pull-right"><a href="/2023/07/14/NLP%20-%20LSTM%20Code%20&amp;%20Annotations%20(Paddle)/"><img class="next-cover" data-lazy-src="https://i.loli.net/2020/07/13/KhC7N5EDpbt6OM2.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">NLP - LSTM Code &amp; Annotations (Paddle)</div></div></a></div></nav></article></main><footer id="footer" style="background-image: url(https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By Colythme</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="font_plus" type="button" title="Increase Font Size"><i class="fas fa-plus"></i></button><button id="font_minus" type="button" title="Decrease Font Size"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="Switch Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">Local search</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>Powered by</span> <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a></div></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js" async></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><script>var endLoading = function () {
  document.body.style.overflow = 'auto';
  document.getElementById('loading-box').classList.add("loaded")
}
window.addEventListener('load',endLoading)</script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    loader: {
      source: {
        '[tex]/amsCd': '[tex]/amscd'
      }
    },
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, '']
      }
    }
  }
  
  var script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typeset()
}</script><script>if (document.getElementsByClassName('mermaid').length) {
  if (window.mermaidJsLoad) mermaid.init()
  else {
    $.getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js', function () {
      window.mermaidJsLoad = true
      mermaid.initialize({
        theme: 'dark',
      })
      true && mermaid.init()
    })
  }
}</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><div class="aplayer no-destroy" data-id="2065854146" data-server="netease" data-type="playlist" data-fixed="true" data-mini="true" data-listFolded="false" data-order="random" data-preload="none" data-autoplay="true" muted></div><script src="/js/third-party/activate-power-mode.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
document.body.addEventListener('input', POWERMODE);
</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: [
    'title',
    'meta[name=description]',
    '#config_change',
    '#body-wrap',
    '#rightside-config-hide',
    '#rightside-config-show',
    '.js-pjax'
  ],
  cacheBust: false,
})

document.addEventListener('pjax:complete', function () {
  refreshFn()

  $('script[data-pjax]').each(function () {
    $(this).parent().append($(this).remove())
  })

  GLOBAL_CONFIG.islazyload && lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  if (typeof gtag === 'function') {
    gtag('config', '', {'page_path': window.location.pathname});
  }

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

})

document.addEventListener('pjax:send', function () {
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  $(window).off('scroll')

  //reset readmode
  $('body').hasClass('read-mode') && $('body').removeClass('read-mode')

  //reset font-size
  $('body').css('font-size') !== originFontSize && $('body').css('font-size', parseFloat(originFontSize))
})</script></div></body></html>